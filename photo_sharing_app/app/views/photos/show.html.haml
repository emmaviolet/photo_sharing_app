%section

  %div
    %p
      = @photo.name
      from the album
      = link_to @photo.album.name, album_path(@photo.album)

  %div
    = link_to image_tag(@photo.photo_file.detail.url), @photo.photo_file.detail.url

  %div
    %p
      Rating:
      = @photo.reputation_for(:votes).to_i
    %p
      = link_to "vote up", vote_photo_path(@photo, type: "up"), method: "post"
      |
      = link_to "vote down", vote_photo_path(@photo, type: "down"), method: "post"
  %div
    %p 
      %b Tags:
      = @photo.tags
  %div
    %p
      %b Description:
      = @photo.try :description
  
  %div
    - if Album.find(@photo.album_id).user_id == current_user.id
      %p
        = link_to 'Edit', edit_photo_path(@photo)
        |
        = link_to 'Destroy', @photo, method: :delete, data: { confirm: 'Are you sure?' } 

%section


  = javascript_tag "var userId = #{current_user.id};"

  %input#addCommentButton{ :type => "button", :value => "Add a Comment"}
  #addComment.answer_list{:style => "display:none;"} 
    = form_for @photo.comments.build, url: photo_comments_path(@photo) do |f|
      %fieldset.input 
        = f.label :text, 'Add a Comment'
        = f.text_field :text
      %fieldset.button
        = f.submit "Submit"

  #commentsContainer
    #allComments
      %input#photo_id{:value => @photo.id, :type => "hidden"}
      %p Comments:
      - @photo.comments.each do |comment|
        =render partial: 'comment', object: comment
  